(()=>{var e={};e.id=734,e.ids=[734],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4770:e=>{"use strict";e.exports=require("crypto")},665:e=>{"use strict";e.exports=require("dns")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},5816:e=>{"use strict";e.exports=require("process")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},204:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c}),t(7044),t(2805),t(2029),t(7629),t(2523);var a=t(3191),r=t(8716),i=t(7922),n=t.n(i),o=t(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(s,l);let c=["",{children:["(public)",{children:["tz",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7044)),"/Users/gleb/Documents/Kwork/Design360/src/app/(public)/tz/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2805)),"/Users/gleb/Documents/Kwork/Design360/src/app/(public)/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,2029)),"/Users/gleb/Documents/Kwork/Design360/src/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,7629)),"/Users/gleb/Documents/Kwork/Design360/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,2523)),"/Users/gleb/Documents/Kwork/Design360/src/app/not-found.tsx"]}],d=["/Users/gleb/Documents/Kwork/Design360/src/app/(public)/tz/page.tsx"],m="/(public)/tz/page",u={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(public)/tz/page",pathname:"/tz",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7316:(e,s,t)=>{Promise.resolve().then(t.bind(t,6275))},6275:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var a=t(326),r=t(7577);let i={BOT_TOKEN:"8304590877:AAEfblij32-TzdrBtCa4HNEyTu84ADUW4wY",CHAT_ID:"572193621",API_URL:"https://api.telegram.org/bot"},n=e=>e?String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):"",o=async e=>{try{let s=await fetch(`${i.API_URL}${i.BOT_TOKEN}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:i.CHAT_ID,text:e,parse_mode:"HTML"})});if(!s.ok){let e=(await s.json().catch(()=>({}))).description||`HTTP error! status: ${s.status}`;throw Error(e)}let t=await s.json();return{success:!0,data:t}}catch(e){return{success:!1,error:e.message}}},l=e=>{let{objectType:s,totalArea:t,roomsCount:a,selectedRooms:r,roomParams:i}=e,o={"living-room":"Гостиная",kitchen:"Кухня",bedroom:"Спальня",bathroom:"Ванная",toilet:"Туалет",hallway:"Прихожая",balcony:"Балкон","dressing-room":"Гардеробная"};r.map(e=>o[e]||e);let l="";r.length>0&&(l=r.map(e=>{let s=o[e]||e,t=i[e]||{},a=t.length?.toString()||"0",r=t.width?.toString()||"0",l=t.height?.toString()||"0",c=t.area?.toString()||"0.0";return`• ${n(s)}: ${n(c)} м\xb2 (${n(a)}\xd7${n(r)}\xd7${n(l)} м)`}).join("\n"));let c="";r.length>0&&(c=r.map(e=>{let s=o[e]||e,t=i[e]||{},a=t.length?.toString()||"0",r=t.width?.toString()||"0",l=t.height?.toString()||"0",c=t.area?.toString()||"0.0",d=n(t.purpose||"Не указано"),m=n(t.requirements||"Не указаны");return`
🏠 <b>${n(s)}</b>:
📐 Размеры: ${n(a)} \xd7 ${n(r)} \xd7 ${n(l)} м
📏 Площадь: ${n(c)} м\xb2
🎯 Назначение: ${d}
⚙️ Требования: ${m}`}).join("\n"));let d=r.reduce((e,s)=>{let t=i[s]||{};return e+(parseFloat(t.area?.toString()||"0")||0)},0).toFixed(1),m=n({apartment:"Квартира",studio:"Студия",house:"Частный дом",commercial:"Коммерция"}[s]||s),u=new Date().toLocaleString("ru-RU"),p=`🏠 <b>ЭКСПЛИКАЦИЯ ПОМЕЩЕНИЙ ПО ГОСТ 21.501-2018</b>

📋 <b>Тип объекта:</b> ${m}
📐 <b>Общая площадь:</b> ${n(d)} м\xb2
🚪 <b>Количество комнат:</b> ${n(a)}

📊 <b>КРАТКАЯ СВОДКА:</b>
${l||"• Данные не заполнены"}

📋 <b>ПОДРОБНАЯ ИНФОРМАЦИЯ О ПОМЕЩЕНИЯХ:</b>${c||"\n• Данные не заполнены"}

📈 <b>ИТОГО:</b> ${n(d)} м\xb2

📅 <b>Дата создания:</b> ${n(u)}
🔗 <b>Источник:</b> Дизайн360 - Экспликация помещений`.trim();if(p.length>4096){let e=r.map(e=>{let s=o[e]||e,t=i[e]||{},a=t.area?.toString()||"0.0";return`• ${n(s)}: ${n(a)} м\xb2`}).join("\n");return`🏠 <b>ЭКСПЛИКАЦИЯ ПОМЕЩЕНИЙ ПО ГОСТ 21.501-2018</b>

📋 <b>Тип объекта:</b> ${m}
📐 <b>Общая площадь:</b> ${n(d)} м\xb2
🚪 <b>Количество комнат:</b> ${n(a)}

📊 <b>СВОДКА:</b>
${e||"• Данные не заполнены"}

📈 <b>ИТОГО:</b> ${n(d)} м\xb2

📅 <b>Дата создания:</b> ${n(u)}
🔗 <b>Источник:</b> Дизайн360 - Экспликация помещений`.trim()}return p},c=async e=>{try{let s=l(e),t=await o(s);if(t.success)return{success:!0,message:"Заявка успешно отправлена! Мы свяжемся с вами в ближайшее время."};throw Error(t.error)}catch(e){return{success:!1,message:"Произошла ошибка при отправке заявки. Попробуйте еще раз или свяжитесь с нами напрямую."}}};t(3985);let d=[{id:"apartment",icon:"\uD83C\uDFE2",name:"Квартира",description:"Жилое помещение"},{id:"studio",icon:"\uD83C\uDFD8️",name:"Студия",description:"Открытое пространство"},{id:"house",icon:"\uD83C\uDFE0",name:"Частный дом",description:"Индивидуальное жилье"},{id:"commercial",icon:"\uD83C\uDFEA",name:"Коммерция",description:"Офис, магазин, кафе"}],m=[{id:"living-room",icon:"\uD83D\uDECB️",name:"Гостиная"},{id:"kitchen",icon:"\uD83C\uDF73",name:"Кухня"},{id:"bedroom",icon:"\uD83D\uDECF️",name:"Спальня"},{id:"bathroom",icon:"\uD83D\uDEBF",name:"Ванная"},{id:"toilet",icon:"\uD83D\uDEBD",name:"Туалет"},{id:"hallway",icon:"\uD83D\uDEAA",name:"Прихожая"},{id:"balcony",icon:"\uD83C\uDF24️",name:"Балкон"},{id:"dressing-room",icon:"\uD83D\uDC54",name:"Гардеробная"}],u={"living-room":"Гостиная",kitchen:"Кухня",bedroom:"Спальня",bathroom:"Ванная",toilet:"Туалет",hallway:"Прихожая",balcony:"Балкон","dressing-room":"Гардеробная"};function p(){let{formData:e,currentStep:s,errors:t,isSubmitting:i,validationAttempts:n,updateFormData:o,updateRoomParams:l,toggleRoom:p,selectAllRooms:b,resetRoomParams:h,nextStep:x,prevStep:g,goToStep:j,validateAllSteps:v,setSubmitting:N,getStepAccessibility:y}=function(){let[e,s]=(0,r.useState)({objectType:"",totalArea:"",roomsCount:"",selectedRooms:[],roomParams:{}}),[t,a]=(0,r.useState)(1),[i,n]=(0,r.useState)({}),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(0),m=(0,r.useCallback)(e=>{s(s=>({...s,...e}))},[]),u=(0,r.useCallback)((e,t,a)=>{s(s=>({...s,roomParams:{...s.roomParams,[e]:{...s.roomParams[e],[t]:a}}}))},[]),p=(0,r.useCallback)(e=>{s(s=>{let t=s.selectedRooms.includes(e);return{...s,selectedRooms:t?s.selectedRooms.filter(s=>s!==e):[...s.selectedRooms,e]}})},[]),b=(0,r.useCallback)(()=>{let e=["living-room","bedroom","kitchen","bathroom","hallway","balcony"];s(s=>({...s,selectedRooms:e}))},[]),h=(0,r.useCallback)(()=>{s(e=>({...e,roomParams:{}}))},[]),x=(0,r.useCallback)(()=>{v()?(a(e=>Math.min(e+1,4)),n({})):d(e=>e+1)},[t,e]),g=(0,r.useCallback)(()=>{a(e=>Math.max(e-1,1)),n({})},[]),j=(0,r.useCallback)(e=>{(e<=t||N(e-1))&&(a(e),n({}))},[t]),v=(0,r.useCallback)(()=>{let s={};return 1!==t||(e.objectType||(s.objectType="Выберите тип объекта"),e.totalArea||(s.totalArea="Укажите общую площадь"),e.roomsCount||(s.roomsCount="Укажите количество комнат")),2===t&&0===e.selectedRooms.length&&(s.selectedRooms="Выберите хотя бы одну комнату"),3===t&&e.selectedRooms.forEach(t=>{let a=e.roomParams[t];a&&a.area||(s[`${t}_area`]="Укажите площадь")}),n(s),0===Object.keys(s).length},[t,e]),N=(0,r.useCallback)(e=>!0,[]),y=(0,r.useCallback)(()=>v(),[v]),C=(0,r.useCallback)(()=>{n({})},[]),D=(0,r.useCallback)(()=>{d(0)},[]),k=(0,r.useCallback)(()=>({1:!0,2:!!e.objectType,3:e.selectedRooms.length>0,4:!0}),[e]);return{formData:e,currentStep:t,errors:i,isSubmitting:o,validationAttempts:c,updateFormData:m,updateRoomParams:u,toggleRoom:p,selectAllRooms:b,resetRoomParams:h,nextStep:x,prevStep:g,goToStep:j,canProceed:(0,r.useCallback)(()=>v(),[v]),validateCurrentStep:v,validateAllSteps:y,clearErrors:C,setSubmitting:l,resetValidationAttempts:D,getStepAccessibility:k}}(),[C,D]=(0,r.useState)(null),k=async()=>{if(!v()){D({type:"error",message:"Пожалуйста, заполните все обязательные поля"}),setTimeout(()=>D(null),5e3);return}N(!0);try{let s=await c(e);s.success?(D({type:"success",message:s.message||"Техническое задание успешно отправлено!"}),setTimeout(()=>window.location.reload(),3e3)):(D({type:"error",message:s.message||"Произошла ошибка при отправке. Попробуйте еще раз."}),N(!1),setTimeout(()=>D(null),5e3))}catch(e){D({type:"error",message:"Произошла ошибка при отправке. Попробуйте еще раз или свяжитесь с нами напрямую."}),N(!1),setTimeout(()=>D(null),5e3)}},$=y();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"main-container",children:[a.jsx("div",{className:"steps-container",children:[{id:1,title:"Тип объекта"},{id:2,title:"Помещения"},{id:3,title:"Параметры"},{id:4,title:"Экспликация"}].map(e=>a.jsx("div",{className:`step ${s===e.id?"active":""} ${$[e.id]?"":"disabled"}`,onClick:()=>$[e.id]&&j&&j(e.id),style:{cursor:$[e.id]?"pointer":"not-allowed",opacity:$[e.id]?1:.5},children:e.title},e.id))}),(0,a.jsxs)("div",{className:"content-grid",children:[1===s&&(0,a.jsxs)("div",{className:"content-section form-step active",children:[a.jsx("div",{className:"section-header",children:a.jsx("div",{className:"section-title",children:"Тип объекта"})}),a.jsx("div",{className:"rooms-grid",children:d.map(s=>(0,a.jsxs)("div",{className:`room-card ${e.objectType===s.id?"selected":""}`,onClick:()=>o({objectType:s.id}),children:[a.jsx("div",{className:"room-icon",children:s.icon}),a.jsx("div",{className:"room-name",children:s.name}),a.jsx("div",{className:"room-area",children:s.description})]},s.id))}),(0,a.jsxs)("div",{className:"param-row",style:{marginTop:"16px"},children:[(0,a.jsxs)("div",{className:"param-group",children:[(0,a.jsxs)("label",{className:"param-label",children:["Общая площадь (м\xb2) ",a.jsx("span",{style:{color:"red"},children:"*"})]}),a.jsx("input",{type:"number",className:"param-input",placeholder:"65",value:e.totalArea,onChange:e=>o({totalArea:e.target.value}),min:"0.1",step:"0.1"})]}),(0,a.jsxs)("div",{className:"param-group",children:[(0,a.jsxs)("label",{className:"param-label",children:["Количество комнат ",a.jsx("span",{style:{color:"red"},children:"*"})]}),a.jsx("input",{type:"number",className:"param-input",placeholder:"3",value:e.roomsCount,onChange:e=>o({roomsCount:e.target.value}),min:"1"})]})]}),a.jsx("div",{className:"summary-actions",children:a.jsx("button",{className:"btn btn-primary",onClick:x,children:"Далее"})})]}),2===s&&(0,a.jsxs)("div",{className:"content-section form-step active",children:[(0,a.jsxs)("div",{className:"section-header",children:[a.jsx("div",{className:"section-title",children:"Помещения для экспликации"}),a.jsx("div",{className:"section-actions",children:a.jsx("button",{className:"btn btn-secondary",onClick:b,children:"Выбрать все"})})]}),a.jsx("div",{className:"rooms-grid",children:m.map(s=>{let t=e.selectedRooms.includes(s.id),r=!t&&e.selectedRooms.length>=parseInt(e.roomsCount);return(0,a.jsxs)("div",{className:`room-card ${t?"selected":""} ${r?"disabled":""}`,onClick:()=>!r&&p(s.id),style:{cursor:r?"not-allowed":"pointer",opacity:r?.5:1},children:[a.jsx("div",{className:"room-icon",children:s.icon}),a.jsx("div",{className:"room-name",children:s.name}),a.jsx("div",{className:"room-area",children:"— м\xb2"})]},s.id)})}),(0,a.jsxs)("div",{className:"summary-actions",children:[a.jsx("button",{className:"btn btn-secondary",onClick:g,children:"Назад"}),a.jsx("button",{className:"btn btn-primary",onClick:x,children:"Далее"})]})]}),3===s&&(0,a.jsxs)("div",{className:"content-section form-step active",children:[(0,a.jsxs)("div",{className:"section-header",children:[a.jsx("div",{className:"section-title",children:"Параметры помещений"}),a.jsx("div",{className:"section-actions",children:a.jsx("button",{className:"btn btn-secondary",onClick:h,children:"Сбросить все"})})]}),a.jsx("div",{className:"rooms-params-list",children:e.selectedRooms.map((s,t)=>(0,a.jsxs)("div",{className:"room-params-card",children:[a.jsx("div",{className:"room-params-header",children:(0,a.jsxs)("h3",{className:"room-params-title",children:[t+1,". ",u[s]||s]})}),(0,a.jsxs)("div",{className:"param-row",children:[(0,a.jsxs)("div",{className:"param-group",children:[a.jsx("label",{className:"param-label",children:"Площадь (м\xb2)"}),a.jsx("input",{type:"number",className:"param-input",placeholder:"18.5",value:e.roomParams[s]?.area||"",onChange:e=>l(s,"area",e.target.value),min:"0.1",step:"0.1"})]}),(0,a.jsxs)("div",{className:"param-group",children:[a.jsx("label",{className:"param-label",children:"Высота (м)"}),a.jsx("input",{type:"number",className:"param-input",placeholder:"2.7",value:e.roomParams[s]?.height||"",onChange:e=>l(s,"height",e.target.value),min:"0.1",step:"0.1"})]})]})]},s))}),(0,a.jsxs)("div",{className:"summary-actions",children:[a.jsx("button",{className:"btn btn-secondary",onClick:g,children:"Назад"}),a.jsx("button",{className:"btn btn-primary",onClick:x,children:"Далее"})]})]}),4===s&&(0,a.jsxs)("div",{className:"content-section form-step active",children:[a.jsx("div",{className:"section-header",children:a.jsx("div",{className:"section-title",children:"Экспликация помещений"})}),(0,a.jsxs)("div",{className:"explanation-summary",children:[(0,a.jsxs)("div",{className:"summary-header",children:[a.jsx("span",{children:"Сводка по ГОСТ 21.501-2018"}),(0,a.jsxs)("span",{children:["Общая площадь:"," ",e.selectedRooms.reduce((s,t)=>{let a=Number((e.roomParams[t]||{}).area??0);return s+(Number.isNaN(a)?0:a)},0).toFixed(1)," ","м\xb2"]})]}),a.jsx("div",{className:"summary-items",children:e.selectedRooms.map(s=>{let t=e.roomParams[s]||{};return(0,a.jsxs)("div",{className:"summary-item",children:[a.jsx("span",{children:u[s]||s}),(0,a.jsxs)("span",{children:[t.area||"0.0"," м\xb2"]})]},s)})})]}),(0,a.jsxs)("div",{className:"summary-actions",children:[a.jsx("button",{className:"btn btn-secondary",onClick:g,children:"Назад"}),a.jsx("button",{className:"btn btn-primary",onClick:k,disabled:i,children:i?"Отправка...":"Завершить"})]})]})]})]}),C&&a.jsx("div",{className:`notification ${C.type}`,children:C.message}),i&&a.jsx("div",{className:"loading-overlay",children:(0,a.jsxs)("div",{className:"loading-content",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Отправка данных..."})]})})]})}},7044:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`/Users/gleb/Documents/Kwork/Design360/src/app/(public)/tz/page.tsx#default`)},3985:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[844,147,226,359,282],()=>t(204));module.exports=a})();