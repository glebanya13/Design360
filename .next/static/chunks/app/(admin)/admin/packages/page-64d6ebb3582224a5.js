(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[730,822],{5340:function(e,r,t){Promise.resolve().then(t.bind(t,4368))},4368:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return n}});var a=t(7437),i=t(2265),s=t(822);function n(){let[e,r]=(0,i.useState)([]),[t,n]=(0,i.useState)(!0),[d,l]=(0,i.useState)(!1),[c,o]=(0,i.useState)(null),[h,u]=(0,i.useState)({name:"",targetAudience:"",visualizations:"",price:"",description:"",highlighted:!1,order:0});(0,i.useEffect)(()=>{p()},[]);let p=async()=>{try{n(!0);let e=await s.$I.getAll();r(e)}catch(e){alert("Ошибка загрузки пакетов")}finally{n(!1)}},g=async e=>{e.preventDefault();try{let e=h.visualizations.includes("+")?h.visualizations:Number(h.visualizations);(null==c?void 0:c.id)?await s.$I.update(c.id,{name:h.name,targetAudience:h.targetAudience,visualizations:e,price:h.price,description:h.description,highlighted:h.highlighted,order:Number(h.order)}):await s.$I.create({name:h.name,targetAudience:h.targetAudience,visualizations:e,price:h.price,description:h.description,highlighted:h.highlighted,order:Number(h.order)}),b(),p()}catch(e){alert("Ошибка сохранения пакета")}},m=e=>{o(e),u({name:e.name,targetAudience:e.targetAudience,visualizations:"string"==typeof e.visualizations?e.visualizations:e.visualizations.toString(),price:e.price,description:e.description,highlighted:e.highlighted||!1,order:e.order||0}),l(!0)},w=async e=>{if(confirm("Вы уверены, что хотите удалить этот пакет?"))try{await s.$I.delete(e),p()}catch(e){alert("Ошибка удаления пакета")}},b=()=>{u({name:"",targetAudience:"",visualizations:"",price:"",description:"",highlighted:!1,order:0}),o(null),l(!1)};return(0,a.jsxs)("div",{className:"admin-page",children:[(0,a.jsxs)("div",{className:"admin-page-header",children:[(0,a.jsx)("h1",{className:"admin-page-title",children:"Управление пакетами визуализаций"}),(0,a.jsx)("button",{className:"btn btn-primary",onClick:()=>{b(),l(!0)},children:"+ Добавить пакет"})]}),d&&(0,a.jsx)("div",{className:"admin-form-modal",children:(0,a.jsxs)("div",{className:"admin-form-content",children:[(0,a.jsxs)("div",{className:"admin-form-header",children:[(0,a.jsxs)("h2",{children:[c?"Редактировать":"Добавить"," пакет"]}),(0,a.jsx)("button",{className:"admin-form-close",onClick:b,children:"\xd7"})]}),(0,a.jsxs)("form",{onSubmit:g,className:"admin-form",children:[(0,a.jsxs)("div",{className:"admin-form-group",children:[(0,a.jsx)("label",{children:"Название"}),(0,a.jsx)("input",{type:"text",value:h.name,onChange:e=>u({...h,name:e.target.value}),required:!0,placeholder:"Базовый"})]}),(0,a.jsxs)("div",{className:"admin-form-group",children:[(0,a.jsx)("label",{children:"Целевая аудитория"}),(0,a.jsx)("input",{type:"text",value:h.targetAudience,onChange:e=>u({...h,targetAudience:e.target.value}),required:!0,placeholder:"Для единичных заказов"})]}),(0,a.jsxs)("div",{className:"admin-form-group",children:[(0,a.jsx)("label",{children:'Количество визуализаций (число или "10+")'}),(0,a.jsx)("input",{type:"text",value:h.visualizations,onChange:e=>u({...h,visualizations:e.target.value}),required:!0,placeholder:"1 или 10+"})]}),(0,a.jsxs)("div",{className:"admin-form-group",children:[(0,a.jsx)("label",{children:"Цена"}),(0,a.jsx)("input",{type:"text",value:h.price,onChange:e=>u({...h,price:e.target.value}),required:!0,placeholder:"1390 Р или от 1190 Р / шт."})]}),(0,a.jsxs)("div",{className:"admin-form-group",children:[(0,a.jsx)("label",{children:"Описание"}),(0,a.jsx)("textarea",{value:h.description,onChange:e=>u({...h,description:e.target.value}),required:!0,rows:3,placeholder:"Оплатите и получите готовый файл JPG/PNG высокого качества"})]}),(0,a.jsx)("div",{className:"admin-form-group",children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:h.highlighted,onChange:e=>u({...h,highlighted:e.target.checked})})," ",'Выделить пакет (для пакета "Профи")']})}),(0,a.jsxs)("div",{className:"admin-form-group",children:[(0,a.jsx)("label",{children:"Порядок сортировки"}),(0,a.jsx)("input",{type:"number",value:h.order,onChange:e=>u({...h,order:Number(e.target.value)}),required:!0,min:"0"})]}),(0,a.jsxs)("div",{className:"admin-form-actions",children:[(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",children:c?"Сохранить":"Создать"}),(0,a.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:b,children:"Отмена"})]})]})]})}),t?(0,a.jsx)("div",{className:"admin-loading",children:"Загрузка..."}):(0,a.jsx)("div",{className:"admin-table-container",children:(0,a.jsxs)("table",{className:"admin-table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Порядок"}),(0,a.jsx)("th",{children:"Название"}),(0,a.jsx)("th",{children:"Аудитория"}),(0,a.jsx)("th",{children:"Визуализации"}),(0,a.jsx)("th",{children:"Цена"}),(0,a.jsx)("th",{children:"Выделен"}),(0,a.jsx)("th",{children:"Действия"})]})}),(0,a.jsx)("tbody",{children:0===e.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"admin-table-empty",children:"Пакеты не найдены. Добавьте первый пакет."})}):e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.order||0}),(0,a.jsx)("td",{children:e.name}),(0,a.jsx)("td",{children:e.targetAudience}),(0,a.jsx)("td",{children:e.visualizations}),(0,a.jsx)("td",{children:e.price}),(0,a.jsx)("td",{children:e.highlighted?"✓":""}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"admin-table-actions",children:[(0,a.jsx)("button",{className:"btn btn-outline",onClick:()=>m(e),children:"Редактировать"}),(0,a.jsx)("button",{className:"btn btn-secondary",onClick:()=>e.id&&w(e.id),children:"Удалить"})]})})]},e.id))})]})})]})}t(6809)},822:function(e,r,t){"use strict";let a,i;t.d(r,{catalogCategoriesService:function(){return u},$I:function(){return h},productsService:function(){return l},Td:function(){return p},Fb:function(){return c},jI:function(){return o}});var s=t(5978),n=t(738),d=t(2148);try{(a=(0,n.C6)().length?(0,n.C6)()[0]:(0,n.ZF)({apiKey:"AIzaSyCFdipmaKMbvOTMX4u7-_ZSC4ceLJzLmeA",authDomain:"design360-efab7.firebaseapp.com",projectId:"design360-efab7",storageBucket:"design360-efab7.firebasestorage.app",messagingSenderId:"912484941208",appId:"1:912484941208:web:ae34a702a3ed0ed7a4ffed"}))&&(i=(0,s.ad)(a),(0,d.v0)(a))}catch(e){}let l={async getAll(){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let e=(0,s.hJ)(i,"products");return(await (0,s.PL)(e)).docs.map(e=>({id:e.id,...e.data()}))},async getById(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.JU)(i,"products",e),t=await (0,s.QT)(r);return t.exists()?{id:t.id,...t.data()}:null},async create(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.hJ)(i,"products"),t=(0,s.JU)(r);return await (0,s.pl)(t,{...e,createdAt:s.EK.now(),updatedAt:s.EK.now()}),t.id},async update(e,r){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let t=(0,s.JU)(i,"products",e);await (0,s.r7)(t,{...r,updatedAt:s.EK.now()})},async delete(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.JU)(i,"products",e);await (0,s.oe)(r)}},c={async getAll(){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let e=(0,s.hJ)(i,"services");return(await (0,s.PL)(e)).docs.map(e=>({id:e.id,...e.data()}))},async getById(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.JU)(i,"services",e),t=await (0,s.QT)(r);return t.exists()?{id:t.id,...t.data()}:null},async create(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.hJ)(i,"services"),t=(0,s.JU)(r);return await (0,s.pl)(t,{...e,createdAt:s.EK.now(),updatedAt:s.EK.now()}),t.id},async update(e,r){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let t=(0,s.JU)(i,"services",e);await (0,s.r7)(t,{...r,updatedAt:s.EK.now()})},async delete(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.JU)(i,"services",e);await (0,s.oe)(r)}},o={async get(){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let e=(0,s.JU)(i,"settings","site"),r=await (0,s.QT)(e);return r.exists()?{id:r.id,...r.data()}:null},async update(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.JU)(i,"settings","site");(await (0,s.QT)(r)).exists()?await (0,s.r7)(r,{...e,updatedAt:s.EK.now()}):await (0,s.pl)(r,{...e,updatedAt:s.EK.now()})}},h={async getAll(){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let e=(0,s.hJ)(i,"packages");return(await (0,s.PL)(e)).docs.map(e=>({id:e.id,...e.data()})).sort((e,r)=>(e.order||0)-(r.order||0))},async getById(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.JU)(i,"packages",e),t=await (0,s.QT)(r);return t.exists()?{id:t.id,...t.data()}:null},async create(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.hJ)(i,"packages"),t=(0,s.JU)(r);return await (0,s.pl)(t,{...e,createdAt:s.EK.now(),updatedAt:s.EK.now()}),t.id},async update(e,r){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let t=(0,s.JU)(i,"packages",e);await (0,s.r7)(t,{...r,updatedAt:s.EK.now()})},async delete(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.JU)(i,"packages",e);await (0,s.oe)(r)}},u={async getAll(){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let e=(0,s.hJ)(i,"catalogCategories");return(await (0,s.PL)(e)).docs.map(e=>({id:e.id,...e.data()})).sort((e,r)=>(e.order||0)-(r.order||0))},async create(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.hJ)(i,"catalogCategories"),t=(0,s.JU)(r);return await (0,s.pl)(t,{...e,createdAt:s.EK.now(),updatedAt:s.EK.now()}),t.id},async update(e,r){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let t=(0,s.JU)(i,"catalogCategories",e);await (0,s.r7)(t,{...r,updatedAt:s.EK.now()})},async delete(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.JU)(i,"catalogCategories",e);await (0,s.oe)(r)}},p={async getAll(){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let e=(0,s.hJ)(i,"serviceCategories");return(await (0,s.PL)(e)).docs.map(e=>({id:e.id,...e.data()})).sort((e,r)=>(e.order||0)-(r.order||0))},async create(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.hJ)(i,"serviceCategories"),t=(0,s.JU)(r);return await (0,s.pl)(t,{...e,createdAt:s.EK.now(),updatedAt:s.EK.now()}),t.id},async update(e,r){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let t=(0,s.JU)(i,"serviceCategories",e);await (0,s.r7)(t,{...r,updatedAt:s.EK.now()})},async delete(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.JU)(i,"serviceCategories",e);await (0,s.oe)(r)}}},6809:function(){}},function(e){e.O(0,[314,982,609,324,351,971,117,744],function(){return e(e.s=5340)}),_N_E=e.O()}]);