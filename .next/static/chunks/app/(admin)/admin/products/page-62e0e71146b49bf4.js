(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[578,822],{949:function(e,r,a){Promise.resolve().then(a.bind(a,1225))},1225:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return n}});var t=a(7437),i=a(2265),s=a(822);function n(){let[e,r]=(0,i.useState)([]),[a,n]=(0,i.useState)(!0),[d,c]=(0,i.useState)(!1),[o,l]=(0,i.useState)(null),[u,h]=(0,i.useState)({name:"",price:"",category:"",image:"",description:""});(0,i.useEffect)(()=>{p()},[]);let p=async()=>{try{n(!0);let e=await s.productsService.getAll();r(e)}catch(e){alert("Ошибка загрузки продуктов")}finally{n(!1)}},m=async e=>{e.preventDefault();try{(null==o?void 0:o.id)?await s.productsService.update(o.id,{name:u.name,price:Number(u.price),category:u.category,image:u.image,description:u.description}):await s.productsService.create({name:u.name,price:Number(u.price),category:u.category,image:u.image,description:u.description}),b(),p()}catch(e){alert("Ошибка сохранения продукта")}},g=e=>{l(e),h({name:e.name,price:e.price.toString(),category:e.category,image:e.image,description:e.description}),c(!0)},w=async e=>{if(confirm("Вы уверены, что хотите удалить этот продукт?"))try{await s.productsService.delete(e),p()}catch(e){alert("Ошибка удаления продукта")}},b=()=>{h({name:"",price:"",category:"",image:"",description:""}),l(null),c(!1)};return(0,t.jsxs)("div",{className:"admin-page",children:[(0,t.jsxs)("div",{className:"admin-page-header",children:[(0,t.jsx)("h1",{className:"admin-page-title",children:"Управление продуктами"}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:()=>{b(),c(!0)},children:"+ Добавить продукт"})]}),d&&(0,t.jsx)("div",{className:"admin-form-modal",children:(0,t.jsxs)("div",{className:"admin-form-content",children:[(0,t.jsxs)("div",{className:"admin-form-header",children:[(0,t.jsxs)("h2",{children:[o?"Редактировать":"Добавить"," продукт"]}),(0,t.jsx)("button",{className:"admin-form-close",onClick:b,children:"\xd7"})]}),(0,t.jsxs)("form",{onSubmit:m,className:"admin-form",children:[(0,t.jsxs)("div",{className:"admin-form-group",children:[(0,t.jsx)("label",{children:"Название"}),(0,t.jsx)("input",{type:"text",value:u.name,onChange:e=>h({...u,name:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"admin-form-group",children:[(0,t.jsx)("label",{children:"Цена"}),(0,t.jsx)("input",{type:"number",value:u.price,onChange:e=>h({...u,price:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"admin-form-group",children:[(0,t.jsx)("label",{children:"Категория"}),(0,t.jsx)("input",{type:"text",value:u.category,onChange:e=>h({...u,category:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"admin-form-group",children:[(0,t.jsx)("label",{children:"Изображение (URL)"}),(0,t.jsx)("input",{type:"text",value:u.image,onChange:e=>h({...u,image:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"admin-form-group",children:[(0,t.jsx)("label",{children:"Описание"}),(0,t.jsx)("textarea",{value:u.description,onChange:e=>h({...u,description:e.target.value}),required:!0,rows:4})]}),(0,t.jsxs)("div",{className:"admin-form-actions",children:[(0,t.jsx)("button",{type:"submit",className:"btn btn-primary",children:o?"Сохранить":"Создать"}),(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:b,children:"Отмена"})]})]})]})}),a?(0,t.jsx)("div",{className:"admin-loading",children:"Загрузка..."}):(0,t.jsx)("div",{className:"admin-table-container",children:(0,t.jsxs)("table",{className:"admin-table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"ID"}),(0,t.jsx)("th",{children:"Название"}),(0,t.jsx)("th",{children:"Цена"}),(0,t.jsx)("th",{children:"Категория"}),(0,t.jsx)("th",{children:"Действия"})]})}),(0,t.jsx)("tbody",{children:0===e.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,className:"admin-table-empty",children:"Продукты не найдены"})}):e.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.id}),(0,t.jsx)("td",{children:e.name}),(0,t.jsxs)("td",{children:[e.price.toLocaleString()," ₽"]}),(0,t.jsx)("td",{children:e.category}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:"admin-table-actions",children:[(0,t.jsx)("button",{className:"btn btn-outline",onClick:()=>g(e),children:"Редактировать"}),(0,t.jsx)("button",{className:"btn btn-secondary",onClick:()=>e.id&&w(e.id),children:"Удалить"})]})})]},e.id))})]})})]})}a(6809)},822:function(e,r,a){"use strict";let t,i;a.d(r,{catalogCategoriesService:function(){return h},$I:function(){return u},productsService:function(){return c},Td:function(){return p},Fb:function(){return o},jI:function(){return l}});var s=a(5978),n=a(738),d=a(2148);try{(t=(0,n.C6)().length?(0,n.C6)()[0]:(0,n.ZF)({apiKey:"AIzaSyCFdipmaKMbvOTMX4u7-_ZSC4ceLJzLmeA",authDomain:"design360-efab7.firebaseapp.com",projectId:"design360-efab7",storageBucket:"design360-efab7.firebasestorage.app",messagingSenderId:"912484941208",appId:"1:912484941208:web:ae34a702a3ed0ed7a4ffed"}))&&(i=(0,s.ad)(t),(0,d.v0)(t))}catch(e){}let c={async getAll(){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let e=(0,s.hJ)(i,"products");return(await (0,s.PL)(e)).docs.map(e=>({id:e.id,...e.data()}))},async getById(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.JU)(i,"products",e),a=await (0,s.QT)(r);return a.exists()?{id:a.id,...a.data()}:null},async create(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.hJ)(i,"products"),a=(0,s.JU)(r);return await (0,s.pl)(a,{...e,createdAt:s.EK.now(),updatedAt:s.EK.now()}),a.id},async update(e,r){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let a=(0,s.JU)(i,"products",e);await (0,s.r7)(a,{...r,updatedAt:s.EK.now()})},async delete(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.JU)(i,"products",e);await (0,s.oe)(r)}},o={async getAll(){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let e=(0,s.hJ)(i,"services");return(await (0,s.PL)(e)).docs.map(e=>({id:e.id,...e.data()}))},async getById(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.JU)(i,"services",e),a=await (0,s.QT)(r);return a.exists()?{id:a.id,...a.data()}:null},async create(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.hJ)(i,"services"),a=(0,s.JU)(r);return await (0,s.pl)(a,{...e,createdAt:s.EK.now(),updatedAt:s.EK.now()}),a.id},async update(e,r){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let a=(0,s.JU)(i,"services",e);await (0,s.r7)(a,{...r,updatedAt:s.EK.now()})},async delete(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.JU)(i,"services",e);await (0,s.oe)(r)}},l={async get(){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let e=(0,s.JU)(i,"settings","site"),r=await (0,s.QT)(e);return r.exists()?{id:r.id,...r.data()}:null},async update(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.JU)(i,"settings","site");(await (0,s.QT)(r)).exists()?await (0,s.r7)(r,{...e,updatedAt:s.EK.now()}):await (0,s.pl)(r,{...e,updatedAt:s.EK.now()})}},u={async getAll(){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let e=(0,s.hJ)(i,"packages");return(await (0,s.PL)(e)).docs.map(e=>({id:e.id,...e.data()})).sort((e,r)=>(e.order||0)-(r.order||0))},async getById(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.JU)(i,"packages",e),a=await (0,s.QT)(r);return a.exists()?{id:a.id,...a.data()}:null},async create(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.hJ)(i,"packages"),a=(0,s.JU)(r);return await (0,s.pl)(a,{...e,createdAt:s.EK.now(),updatedAt:s.EK.now()}),a.id},async update(e,r){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let a=(0,s.JU)(i,"packages",e);await (0,s.r7)(a,{...r,updatedAt:s.EK.now()})},async delete(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.JU)(i,"packages",e);await (0,s.oe)(r)}},h={async getAll(){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let e=(0,s.hJ)(i,"catalogCategories");return(await (0,s.PL)(e)).docs.map(e=>({id:e.id,...e.data()})).sort((e,r)=>(e.order||0)-(r.order||0))},async create(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.hJ)(i,"catalogCategories"),a=(0,s.JU)(r);return await (0,s.pl)(a,{...e,createdAt:s.EK.now(),updatedAt:s.EK.now()}),a.id},async update(e,r){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let a=(0,s.JU)(i,"catalogCategories",e);await (0,s.r7)(a,{...r,updatedAt:s.EK.now()})},async delete(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.JU)(i,"catalogCategories",e);await (0,s.oe)(r)}},p={async getAll(){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let e=(0,s.hJ)(i,"serviceCategories");return(await (0,s.PL)(e)).docs.map(e=>({id:e.id,...e.data()})).sort((e,r)=>(e.order||0)-(r.order||0))},async create(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.hJ)(i,"serviceCategories"),a=(0,s.JU)(r);return await (0,s.pl)(a,{...e,createdAt:s.EK.now(),updatedAt:s.EK.now()}),a.id},async update(e,r){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let a=(0,s.JU)(i,"serviceCategories",e);await (0,s.r7)(a,{...r,updatedAt:s.EK.now()})},async delete(e){if(!i)throw Error("Firebase не инициализирован. Убедитесь, что код выполняется на клиенте.");let r=(0,s.JU)(i,"serviceCategories",e);await (0,s.oe)(r)}}},6809:function(){}},function(e){e.O(0,[314,982,609,324,351,971,117,744],function(){return e(e.s=949)}),_N_E=e.O()}]);